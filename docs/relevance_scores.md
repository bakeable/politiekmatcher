# Relevance Score System

## Overview

The PolitiekMatcher system now includes an AI-generated relevance scoring system for party position sources. This ensures that each source backing a party position has a meaningful relevance score generated by the LLM based on how well it supports the specific position.

## How It Works

### 1. LLM Generation

When creating party positions, the AI is instructed to:

- Analyze each source (StatementPosition or ProgramFragment)
- Determine how relevant it is to the specific party position
- Assign a relevance score between 0.0 and 1.0

### 2. Relevance Score Scale

- **0.9-1.0**: Zeer relevant, directe ondersteuning van het standpunt
- **0.7-0.8**: Relevant, goede ondersteuning
- **0.5-0.6**: Matig relevant, gedeeltelijke ondersteuning
- **0.3-0.4**: Beperkt relevant, zwakke ondersteuning
- **0.0-0.2**: Niet relevant

### 3. Validation

The system validates that:

- Relevance scores are between 0.0 and 1.0
- Source IDs exist in the database for the given party and topic
- Each source object has both 'id' and 'relevance_score' fields

### 4. Storage

Relevance scores are stored in the `PartyPositionSource.relevance_score` field and used for:

- Ordering sources by importance
- Filtering out low-quality sources
- Providing transparency about source quality

## Example Usage

The LLM now generates sources in this format:

```json
{
  "sources": [
    { "id": "StatementPosition-123", "relevance_score": 0.9 },
    { "id": "ProgramFragment-456", "relevance_score": 0.7 }
  ]
}
```

Instead of the old format:

```json
{
  "sources": ["StatementPosition-123", "ProgramFragment-456"]
}
```

## Benefits

1. **Quality Assessment**: Each source has a meaningful quality score
2. **Transparency**: Users can see how relevant each source is
3. **Filtering**: Can filter out low-relevance sources
4. **Ordering**: Sources can be ordered by relevance
5. **AI Accountability**: The AI must justify source relevance
